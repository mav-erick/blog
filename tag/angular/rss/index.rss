<rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="http://search.yahoo.com/mrss/" version="2.0"><channel><title>Angular - The Code Journal</title><description>Python, JavaScript and more</description><link>http://localhost:2368/</link><image><url>http://localhost:2368/favicon.png</url><title>Angular - The Code Journal</title><link>http://localhost:2368/</link></image><generator>Ghost 1.25</generator><lastBuildDate>Sun, 29 Jul 2018 05:03:29 GMT</lastBuildDate><atom:link href="http://localhost:2368/tag/angular/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title>Custom directives in Angular 6 — building a Google places autocomplete</title><description>&lt;p&gt;Final Project: &lt;a href="http://ng-places-maverick.surge.sh/" rel="nofollow noopener"&gt;http://ng-places-maverick.surge.sh/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;I have been playing around with Angular a lot lately and a lot of things that seemed unnecessary in the beginning is starting to make sense. Angular is a well thought out framework, and although it is very opinionated, it follows some of the&lt;/p&gt;</description><link>http://localhost:2368/custom-directives/</link><guid isPermaLink="false">5b5d46bc550d572610b60772</guid><category>Angular</category><category>Custom-directives</category><category>JavaScript</category><dc:creator>Abhishek Menon</dc:creator><pubDate>Sun, 22 Jul 2018 13:57:00 GMT</pubDate><media:content url="http://localhost:2368/content/images/2018/07/1_WNeChyJ5f8nwVue8hkZEPg-1.gif" medium="image"/><content:encoded>&lt;img src="http://localhost:2368/content/images/2018/07/1_WNeChyJ5f8nwVue8hkZEPg-1.gif" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;p&gt;Final Project: &lt;a href="http://ng-places-maverick.surge.sh/" rel="nofollow noopener"&gt;http://ng-places-maverick.surge.sh/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;I have been playing around with Angular a lot lately and a lot of things that seemed unnecessary in the beginning is starting to make sense. Angular is a well thought out framework, and although it is very opinionated, it follows some of the industry best practices when it comes to structuring the frontend of a web application. It was fascinating to discover how much focus is there on code reusability both within a project and across multiple projects! I would like to show you an example, using Angular directives.&lt;/p&gt;&lt;h4 id="what-is-a-directive"&gt;&lt;strong&gt;What is a directive?&lt;/strong&gt;&lt;/h4&gt;&lt;p&gt;A directive allows you to attach a behavior to DOM elements. This behavior could be as simple or as complex as you’d like.&lt;code&gt;*ngFor&lt;/code&gt; and &lt;code&gt;*ngIf&lt;/code&gt; are examples of built-in directives in Angular. In this article, I will show you how to make a custom Google place autocomplete directive that you can attach to any text input.&lt;/p&gt;&lt;h4 id="before-we-begin-"&gt;Before we begin…&lt;/h4&gt;&lt;p&gt;To use Google places autocomplete API, we need an API key. To obtain an API key, please go to the &lt;a href="https://cloud.google.com/maps-platform/" rel="noopener"&gt;Google maps platform&lt;/a&gt; and create a new project.&lt;/p&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_qp5zCTTyarZExL0Rbfphog.png" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;Once you signup, you can find your API key from the &lt;a href="https://console.cloud.google.com/google/maps-apis/" rel="noopener"&gt;developer console&lt;/a&gt;. Note this API key down for later.&lt;/p&gt;&lt;h4 id="setting-up-an-angular-project"&gt;Setting up an Angular project&lt;/h4&gt;&lt;p&gt;Install &lt;a href="https://nodejs.org/en/download/" rel="noopener"&gt;Node.js®&lt;/a&gt; and npm if they are not already on your machine. Now, install Angular CLI globally using..&lt;/p&gt;&lt;p&gt;&lt;code&gt;npm i -g @angular/cli&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Once this is done, let’s create a new Angular project with the following command:&lt;/p&gt;&lt;p&gt;&lt;code&gt;ng new google-places-example&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Now go into your project directory and start the Angular development server:&lt;/p&gt;&lt;pre&gt;&lt;code&gt;cd google-places-example
ng serve&lt;/code&gt;&lt;/pre&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_6yJSVXv7ScPt6Lu4v851pA.png" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;If you go to the server running at &lt;code&gt;&lt;a href="http://localhost:4200/"&gt;http://localhost:4200&lt;/a&gt;&lt;/code&gt;, you will see the above screen.&lt;/p&gt;&lt;p&gt;Nice! Now let’s create an input field to which we will attach the Angular directive. Open the Angular project in your favorite text editor and open the file &lt;code&gt;src/app/app.component.html&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;Change the contents of the file to the following&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/45999203801cd477886666949cf34dba.js"&gt;&lt;/script&gt;&lt;p&gt;Now, let’s add some styling to make our input field look nice. Edit your &lt;code&gt;src/app/app.component.css&lt;/code&gt; to the following&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/72af4514cf3c5e067d7e3f87940d9787.js"&gt;&lt;/script&gt;&lt;p&gt;After this, if you check your development server at &lt;code&gt;&lt;a href="http://localhost:4200/"&gt;http://localhost:4200&lt;/a&gt;&lt;/code&gt;, you should see something like this.&lt;/p&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_z0yHczug6VEvpM7pxzFBxA.png" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;Nice, but “app” is a rather boring name for our app :D. Let’s give it a more descriptive name. Open &lt;code&gt;src/app/app.component.ts&lt;/code&gt; and change the &lt;code&gt;title&lt;/code&gt;variable to whatever you like. I am going to call my app “Places”.&lt;/p&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_UQ0EHzlJBOaafj-6CvEshg.png" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;Cool, now let’s start with the directive.&lt;/p&gt;&lt;h4 id="generating-a-directive-using-angular-cli"&gt;Generating a directive using Angular CLI&lt;/h4&gt;&lt;p&gt;&lt;code&gt;ng g d google-places&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Here, ‘g’ is short for generate and ‘d’ is short for directive. This should generate two files in &lt;code&gt;src/app&lt;/code&gt; called &lt;code&gt;google-places.directive.ts&lt;/code&gt; and &lt;code&gt;google-places.directive.spec.ts&lt;/code&gt;. All files ending with &lt;code&gt;spec.ts&lt;/code&gt; are containers for writing unit tests.&lt;/p&gt;&lt;p&gt;When we place a directive in an element, we get access to a reference to that element in our directive. We will use this reference to attach the autocomplete functionality to the input element. Now, modify the &lt;code&gt;google-places.directive.ts&lt;/code&gt; to the following&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/8ca63274a72b414322076b70bdd23d8d.js"&gt;&lt;/script&gt;&lt;p&gt;Please note that I have changed the name of the &lt;code&gt;selector&lt;/code&gt; as I am not a fan of the autogenerated one. Here, we are getting access to the &lt;code&gt;ElementRef&lt;/code&gt; made available to us via the constructor, and storing the &lt;code&gt;nativeElement&lt;/code&gt; property into a variable, so that we can pass it to google places autocomplete constructor. Once you’re done, you have to modify the index.html found in &lt;code&gt;src&lt;/code&gt; folder of your project to add the google places script. Place the following script between the &lt;code&gt;&amp;lt;head&amp;gt;&lt;/code&gt; tag.&lt;/p&gt;&lt;p&gt;&lt;code&gt;&amp;lt;script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;amp;libraries=places" async defer&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/p&gt;&lt;p&gt;Replace YOUR_API_KEY with the API key you had noted down from earlier. Then, restart the Angular development server.&lt;/p&gt;&lt;p&gt;Now we need to add the directive to our input tag. Modify the &lt;code&gt;input&lt;/code&gt; in &lt;code&gt;src/app/app.component.html&lt;/code&gt; to the following&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&amp;lt;input
  google-place
  type="text"
  class="google-place-input"
  placeholder="Type to search.."&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;All the change we made was to add the directive selector to the input. Save the file, go to the development server and start typing. You should see the following..&lt;/p&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_c8wheI3a9zROSFbJFDm9PA.png" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;Viola! Now you have autocomplete on your very own input field. You can use this autocomplete directive as many times as you want, wherever you want!&lt;/p&gt;&lt;h4 id="sending-events-from-the-directive"&gt;Sending events from the directive&lt;/h4&gt;&lt;p&gt;Now that we have an awesome autocomplete, we might want to send a formatted address instead of a string back to the input field. Let’s see how to do it.&lt;/p&gt;&lt;p&gt;Modify your &lt;code&gt;google-places.directive.ts&lt;/code&gt; like so&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/861d5844817f464990fbbe34015c62d5.js"&gt;&lt;/script&gt;&lt;p&gt;We have done two things here:&lt;/p&gt;&lt;ol&gt;&lt;li&gt;We created a function &lt;code&gt;getFormattedAddress&lt;/code&gt; which takes a google place object as an argument and parses it to create a useful address object.&lt;/li&gt;&lt;li&gt;We added an event listener to the autocomplete API, which will fire every time the place is changed, and we are using this event listener to emit our own event which will parse the place object using the above &lt;code&gt;getFormattedAddress&lt;/code&gt; and send the resulting address object back to the input element.&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;We have exposed this event through an &lt;code&gt;onSelect&lt;/code&gt; event emitter. Now let’s use this event emitter in our input.&lt;/p&gt;&lt;p&gt;Modify the &lt;code&gt;src/app/app.component.ts&lt;/code&gt; to the following:&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/f3b8a3c130d73ca64252b1468370dc3a.js"&gt;&lt;/script&gt;&lt;p&gt;We have created a function called &lt;code&gt;setAddress&lt;/code&gt; which we will call everytime the event emitter emits a new value. We will store the object received and its keys to display it back to the user. Now, let’s modify the &lt;code&gt;app.component.html&lt;/code&gt;to consume the event and display the result:&lt;/p&gt;&lt;script src="https://gist.github.com/mav-erick/5e1b67ef695be459db4748ba6b8ed283.js"&gt;&lt;/script&gt;&lt;p&gt;Check the development server and now we will see the following result:&lt;/p&gt;&lt;figure class="kg-image-card"&gt;&lt;img src="http://localhost:2368/content/images/2018/07/1_WNeChyJ5f8nwVue8hkZEPg.gif" class="kg-image" alt="Custom directives in Angular 6 — building a Google places autocomplete"&gt;&lt;/figure&gt;&lt;p&gt;Awesome! We have created our very own custom google-place directive, which can provide autocomplete to any input field, and emit a formatted address object from the input field.&lt;/p&gt;&lt;p&gt;You can find this Angular project in my GitHub &lt;a href="https://github.com/mav-erick/angular-google-places-autocomplete-directive" rel="noopener"&gt;repo&lt;/a&gt;. Thanks for reading!&lt;/p&gt;</content:encoded></item></channel></rss>